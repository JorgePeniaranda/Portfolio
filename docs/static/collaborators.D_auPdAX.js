import{j as e}from"./jsx-runtime.EKYJJIwR.js";import{r as x}from"./index.DrxKNVES.js";import{D as f,s as b,a as h,C as u,A as j,b as v,c as w,d as k,e as C,f as y,g as N,h as D,i as T}from"./alert-dialog.BtDjhMo0.js";import{B as E}from"./button.x7-QiqwQ.js";import{I as A}from"./input.BtdTvaem.js";import{T as l,a as c,b as d,c as m}from"./tooltip.CS3QOdkF.js";import{a as z,h as P,b as U}from"./toast-handler.D8rKeUy-.js";import{a as p,i as B}from"./is-defined.BPY7jSh6.js";import{u as R}from"./use-toast.BikYzejn.js";import{P as H}from"./plus.CAt6JUe3.js";import{E as M,T as S}from"./trash.C19WQqkW.js";import{P as $}from"./pen.CrEsg7t5.js";import"./index.BLEmuFXE.js";import"./classnames.B8F8Dq1p.js";import"./select.BKrJ3BO-.js";import"./index.rqUiOy30.js";import"./index.B2LyIUNT.js";import"./index.BJknnQuW.js";import"./index.qJiwp9Ip.js";import"./index.CoUN5iVw.js";import"./index.1JkRN11X.js";import"./index.Ca4aSXhd.js";import"./index.yusZEH1f.js";import"./index.2EOGNVNh.js";import"./Combination.CoL-rreF.js";import"./index.BRpELbpY.js";import"./index.CGPvhYpy.js";import"./index.CdA-AeYO.js";import"./index.wLl3Idx7.js";import"./chevrons-up-down.BMPs55cN.js";import"./createLucideIcon.D2R2PR3o.js";import"./chevron-down.DmgAbkcx.js";import"./chevron-right.CVrw0MJX.js";import"./index.CwYy1fy-.js";import"./dropdown-menu.CLGLWY-8.js";import"./x.DYFGPTRN.js";import"./index.BZXvyPAu.js";import"./index.Li38iYKq.js";import"./env.T9ZNvZgm.js";import"./dev-console-log.CInb5xbI.js";import"./index.CdM0oSJi.js";import"./message-display.CI2NEmxy.js";async function F(e){try{const{data:i}=await z.delete("/api/collaborator",{data:e});return i}catch(e){throw P({error:e,defaultErrorMessage:"No se pudo eliminar el colaborador."})}}const K=[b(),{id:"nickname",accessorKey:"nickname",header:({column:i})=>e.jsx(h,{column:i,title:"Nickname"})},{id:"githubUsername",accessorKey:"githubUsername",header:({column:i})=>e.jsx(h,{column:i,title:"Nickname de GitHub"}),cell:({row:i})=>e.jsx("a",{className:"text-blue-500",href:`https://github.com/${i.original.githubUsername}`,rel:"noreferrer",target:"_blank",children:i.original.githubUsername})},{id:"linkedinUsername",accessorKey:"linkedinUsername",header:({column:i})=>e.jsx(h,{column:i,title:"Nickname de Linkedin"}),cell:({row:i})=>e.jsx("a",{className:"text-blue-500",href:`https://www.linkedin.com/in/${i.original.linkedinUsername}`,rel:"noreferrer",target:"_blank",children:i.original.linkedinUsername})}];function ze({data:i}){const[s,r]=x.useState(i);return e.jsx(f,{HeaderComponent:V,columns:K,data:s,meta:{deleteRows:e=>{r((i=>i.filter(((i,s)=>!e.includes(s)))))}}})}function V({table:i}){const{toast:s}=R(),r=i.getSelectedRowModel(),{rows:t,selectedCount:o}=x.useMemo((()=>({...r,selectedCount:r.rows.length??0})),[r]),a=async()=>{try{await F(t.map((e=>e.original.id))),s({title:"Colaboradores eliminados",description:"Los colaboradores seleccionados se han eliminaron correctamente.",className:"bg-green-500 text-black"}),B(i.options.meta?.deleteRows)&&i.options.meta.deleteRows(t.map((e=>e.index))),i.setRowSelection({})}catch(e){U({error:e,title:"Error al eliminar colaboradores",defaultErrorMessage:"Ha ocurrido un error al intentar eliminar los colaboradores.",tryAgain:()=>a()})}};return e.jsxs("div",{className:"flex items-center py-4",children:[e.jsx(A,{autoComplete:"off",className:"max-w-xs",placeholder:"Buscar por nickname...",value:i.getColumn("nickname")?.getFilterValue()??"",onChange:e=>i.getColumn("nickname")?.setFilterValue(e.target.value)}),e.jsxs("ul",{className:"ml-auto flex items-center space-x-2",children:[e.jsx("li",{children:e.jsx(l,{children:e.jsxs(c,{delayDuration:0,children:[e.jsx(d,{asChild:!0,children:e.jsx(u,{className:"inline-flex size-max items-center justify-center whitespace-nowrap rounded-full bg-lime-600 p-2 text-sm font-medium text-white ring-offset-background transition-colors hover:bg-lime-700 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 dark:text-white dark:hover:bg-lime-500",disabled:0!==o,disabledButtonProps:{className:"pointer-events-none opacity-50"},href:"/vault/views/collaborators/create",children:e.jsx(H,{className:"size-5"})})}),e.jsx(m,{children:"Crear"})]})})}),e.jsx("li",{children:e.jsx(l,{children:e.jsxs(c,{delayDuration:0,children:[e.jsx(d,{asChild:!0,children:e.jsx(u,{className:"inline-flex size-max items-center justify-center whitespace-nowrap rounded-full bg-blue-600 p-2 text-sm font-medium text-white ring-offset-background transition-colors hover:bg-blue-700 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 dark:text-white dark:hover:bg-blue-500",disabled:1!==o||p(t[0]?.original.id),disabledButtonProps:{className:"pointer-events-none opacity-50"},href:`/vault/views/collaborators/${t[0]?.original.id}`,children:e.jsx(M,{className:"size-5"})})}),e.jsx(m,{children:"Ver detalles"})]})})}),e.jsx("li",{children:e.jsx(l,{children:e.jsxs(c,{delayDuration:0,children:[e.jsx(d,{asChild:!0,children:e.jsx(u,{className:"inline-flex size-max items-center justify-center whitespace-nowrap rounded-full bg-gray-600 p-2 text-sm font-medium text-white ring-offset-background transition-colors hover:bg-gray-700 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 dark:text-white dark:hover:bg-gray-500",disabled:1!==o||p(t[0]?.original.id),disabledButtonProps:{className:"pointer-events-none opacity-50"},href:`/vault/views/collaborators/${t[0]?.original.id}/edit`,children:e.jsx($,{className:"size-5"})})}),e.jsx(m,{children:"Editar"})]})})}),e.jsx("li",{children:e.jsxs(j,{children:[e.jsx(v,{disabled:o<=0,children:e.jsx(l,{children:e.jsxs(c,{delayDuration:0,children:[e.jsx(d,{asChild:!0,children:e.jsx(E,{className:"size-max rounded-full bg-red-500 p-2 text-white hover:bg-red-600 hover:text-white dark:text-white dark:hover:bg-red-400",disabled:o<=0,variant:"outline",children:e.jsx(S,{className:"size-5"})})}),e.jsx(m,{children:"Eliminar"})]})})}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(C,{children:"¿Está completamente seguro?"}),e.jsx(y,{children:"Esta acción no se puede deshacer. Esto borrará permanentemente el/los colaboradores seleccionados."})]}),e.jsxs(N,{children:[e.jsx(D,{children:"Cancelar"}),e.jsx(T,{className:"bg-red-500 text-white hover:bg-red-600 hover:text-white dark:text-white dark:hover:bg-red-400",onClick:a,children:"Borrar"})]})]})]})})]})]})}export{ze as CollaboratorTable};