import{j as e}from"./jsx-runtime.EKYJJIwR.js";import{z as s,s as w}from"./index.CydnYaqo.js";import{i as x}from"./index-browser.DmCZ7H2o.js";import{u as E,F as k,a as t,b as l,c as n,d as c,e as i}from"./form.93GIvI3c.js";import{B as j}from"./button.x7-QiqwQ.js";import{i as D,P as v,a as g,f as C,b,C as S}from"./is-hexadecimal.CeJG8YVF.js";import{I as m}from"./input.BtdTvaem.js";import{S as y,a as N,b as P,c as R,d as f}from"./select.BKrJ3BO-.js";import{T as p}from"./textarea.tTUkXvbq.js";import{a as O,S as I}from"./transcriptions.BDQUoU-M.js";import{c as T}from"./classnames.B8F8Dq1p.js";import{s as V}from"./safe-redirect.DUNX2EJd.js";import{i as G}from"./is-defined.BPY7jSh6.js";import{u as L}from"./use-toast.BikYzejn.js";import{a as A,h as B,b as _}from"./toast-handler.Dg2NQAfd.js";import{C as U}from"./calendar.CZJnbNns.js";import{S as z}from"./save.CAQ01TeF.js";import".prisma/client/index-browser";import"./index.1JkRN11X.js";import"./index.DrxKNVES.js";import"./index.BLEmuFXE.js";import"./index.2EOGNVNh.js";import"./index.rqUiOy30.js";import"./index.B2LyIUNT.js";import"./index.Li38iYKq.js";import"./index.BJknnQuW.js";import"./index.qJiwp9Ip.js";import"./index.yusZEH1f.js";import"./Combination.CoL-rreF.js";import"./index.BRpELbpY.js";import"./index.CGPvhYpy.js";import"./index.CdA-AeYO.js";import"./index.CwYy1fy-.js";import"./index.CoUN5iVw.js";import"./index.Ca4aSXhd.js";import"./index.wLl3Idx7.js";import"./chevrons-up-down.BMPs55cN.js";import"./createLucideIcon.D2R2PR3o.js";import"./chevron-down.DmgAbkcx.js";import"./dev-console-log.CInb5xbI.js";import"./env.ClbHb-Tu.js";import"./index.CdM0oSJi.js";import"./message-display.CI2NEmxy.js";const K=Object.values(x.StackCategory),M=Object.values(x.ProjectStatus),H=s.object({key:s.string().min(1),name:s.string().min(1),status:s.enum(M),stackCategory:s.enum(K),startDate:s.coerce.date(),endDate:s.coerce.date().optional().nullable(),description:s.string().min(1),goals:s.string().min(1),contributions:s.string().min(1),logoUrl:s.string().min(1),primaryColor:s.string().refine(D,{message:"Invalid hex color format. Expected format: #RRGGBB or #RGB"}),demoUrl:s.string().optional().nullable(),githubUrl:s.string().optional().nullable()}),$={key:"",name:"",status:x.ProjectStatus.IN_PROGRESS,stackCategory:x.StackCategory.FRONT_END,startDate:new Date,endDate:null,description:"",goals:"",contributions:"",logoUrl:"",primaryColor:"#c05454",demoUrl:"",githubUrl:""};async function J(o){try{const{data:u}=await A.post("/api/project",o);return u}catch(u){throw B({error:u,defaultErrorMessage:"No se pudo crear el proyecto."})}}function Ge({disableForm:o=!1}){const{toast:u}=L(),a=E({resolver:w(H),defaultValues:$}),h=async r=>{try{const d=await J(r);a.reset(),u({title:"Proyecto creado",description:"El proyecto ha sido creado exitosamente.",className:"bg-green-500 text-black"}),G(d?.id)&&V(`/vault/views/project/${d.id}`)}catch(d){_({error:d,title:"No se pudo crear el proyecto",defaultErrorMessage:"Ha ocurrido un error al intentar crear el proyecto.",tryAgain:()=>h(r)})}};return e.jsx(k,{...a,children:e.jsxs("form",{className:"space-y-8",onSubmit:a.handleSubmit(h),children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(t,{control:a.control,name:"key",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"Key"}),e.jsx(c,{children:e.jsx(m,{disabled:o,placeholder:"Key",...r})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nombre"}),e.jsx(c,{children:e.jsx(m,{disabled:o,placeholder:"Nombre",...r,value:r.value===null?void 0:r.value})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"status",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"Estado"}),e.jsxs(y,{defaultValue:r.value===null?void 0:r.value,disabled:o,onValueChange:r.onChange,...r,value:r.value===null?void 0:r.value,children:[e.jsx(c,{children:e.jsx(N,{className:"w-[180px]",children:e.jsx(P,{placeholder:"Estado"})})}),e.jsx(R,{children:Object.values(x.ProjectStatus).map(d=>e.jsx(f,{value:d,children:O[d]},d))})]}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"stackCategory",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"Stack"}),e.jsxs(y,{defaultValue:r.value===null?void 0:r.value,disabled:o,onValueChange:r.onChange,...r,value:r.value===null?void 0:r.value,children:[e.jsx(c,{children:e.jsx(N,{className:"w-[180px]",children:e.jsx(P,{placeholder:"Stack"})})}),e.jsx(R,{children:Object.values(x.StackCategory).map(d=>e.jsx(f,{value:d,children:I[d]},d))})]}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"startDate",render:({field:r})=>e.jsxs(l,{className:"flex flex-col",children:[e.jsx(n,{children:"Fecha de inicio"}),e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(c,{children:e.jsxs(j,{className:T("w-[240px] pl-3 text-left font-normal",!r.value&&"text-muted-foreground"),disabled:o,variant:"outline",children:[r.value?C(r.value,"PPP"):e.jsx("span",{children:"Seleccionar fecha de inicio"}),e.jsx(U,{className:"ml-auto size-4 opacity-50"})]})})}),e.jsx(b,{align:"start",className:"w-auto p-0",children:e.jsx(S,{mode:"single",selected:r.value,onSelect:r.onChange})})]}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"endDate",render:({field:r})=>e.jsxs(l,{className:"flex flex-col",children:[e.jsx(n,{children:"Fecha de fin"}),e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(c,{children:e.jsxs(j,{className:T("w-[240px] pl-3 text-left font-normal",!r.value&&"text-muted-foreground"),disabled:o,variant:"outline",children:[r.value?C(r.value,"PPP"):e.jsx("span",{children:"Seleccionar fecha de fin"}),e.jsx(U,{className:"ml-auto size-4 opacity-50"})]})})}),e.jsx(b,{align:"start",className:"w-auto p-0",children:e.jsx(S,{mode:"single",selected:r.value===null?void 0:r.value,onSelect:r.onChange})})]}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"description",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"Descripción"}),e.jsx(c,{children:e.jsx(p,{disabled:o,placeholder:"Descripción",...r,value:r.value===null?void 0:r.value})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"goals",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"Objetivos"}),e.jsx(c,{children:e.jsx(p,{disabled:o,placeholder:"Objetivos",...r,value:r.value===null?void 0:r.value})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"contributions",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"Contribuciones"}),e.jsx(c,{children:e.jsx(p,{disabled:o,placeholder:"Contribuciones",...r,value:r.value===null?void 0:r.value})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"logoUrl",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"URL de logo"}),e.jsx(c,{children:e.jsx(m,{disabled:o,placeholder:"URL de logo",...r,value:r.value===null?void 0:r.value})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"primaryColor",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"Color Primario"}),e.jsx(c,{children:e.jsx(m,{disabled:o,placeholder:"Color Primario",type:"color",...r,value:r.value===null?void 0:r.value})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"demoUrl",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"URL de demo"}),e.jsx(c,{children:e.jsx(m,{disabled:o,placeholder:"URL de demo",...r,value:r.value===null?void 0:r.value})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"githubUrl",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:"URL de Github"}),e.jsx(c,{children:e.jsx(m,{disabled:o,placeholder:"URL de Github",...r,value:r.value===null?void 0:r.value})}),e.jsx(i,{})]})})]}),e.jsxs(j,{className:"flex size-max items-center gap-2 rounded-lg bg-lime-600 p-2 text-white hover:bg-lime-700 dark:bg-lime-600 dark:hover:bg-lime-700",disabled:o,type:"submit",children:[e.jsx(z,{className:"size-7"}),e.jsx("span",{className:"text-lg",children:"Crear"})]})]})})}export{Ge as CreateProjectForm};
