import{j as l}from"./jsx-runtime.EKYJJIwR.js";import{r as s}from"./index.DrxKNVES.js";import{c as h,a as I,u as g}from"./index.qJiwp9Ip.js";import{P as c}from"./index.2EOGNVNh.js";import{c as m}from"./classnames.B8F8Dq1p.js";var f="Avatar",[j,q]=h(f),[C,p]=j(f),A=s.forwardRef((a,e)=>{const{__scopeAvatar:t,...r}=a,[n,o]=s.useState("idle");return l.jsx(C,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:l.jsx(c.span,{...r,ref:e})})});A.displayName=f;var x="AvatarImage",w=s.forwardRef((a,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:n=()=>{},...o}=a,d=p(x,t),i=_(r,o.referrerPolicy),u=I(v=>{n(v),d.onImageLoadingStatusChange(v)});return g(()=>{i!=="idle"&&u(i)},[i,u]),i==="loaded"?l.jsx(c.img,{...o,ref:e,src:r}):null});w.displayName=x;var S="AvatarFallback",N=s.forwardRef((a,e)=>{const{__scopeAvatar:t,delayMs:r,...n}=a,o=p(S,t),[d,i]=s.useState(r===void 0);return s.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>i(!0),r);return()=>window.clearTimeout(u)}},[r]),d&&o.imageLoadingStatus!=="loaded"?l.jsx(c.span,{...n,ref:e}):null});N.displayName=S;function _(a,e){const[t,r]=s.useState("idle");return g(()=>{if(!a){r("error");return}let n=!0;const o=new window.Image,d=i=>()=>{n&&r(i)};return r("loading"),o.onload=d("loaded"),o.onerror=d("error"),o.src=a,e&&(o.referrerPolicy=e),()=>{n=!1}},[a,e]),t}var L=A,y=w,R=N;const b=s.forwardRef(({className:a,...e},t)=>l.jsx(L,{ref:t,className:m("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...e}));b.displayName=L.displayName;const E=s.forwardRef(({className:a,...e},t)=>l.jsx(y,{ref:t,className:m("aspect-square h-full w-full",a),...e}));E.displayName=y.displayName;const k=s.forwardRef(({className:a,...e},t)=>l.jsx(R,{ref:t,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...e}));k.displayName=R.displayName;export{b as A,E as a,k as b};
