import{j as e}from"./jsx-runtime.EKYJJIwR.js";import{s as g}from"./index.CydnYaqo.js";import{i as x}from"./index-browser.DmCZ7H2o.js";import{u as b,F as C,a as t,b as l,c as i,d as n,e as c}from"./form.93GIvI3c.js";import{B as k}from"./button.x7-QiqwQ.js";import{I as p}from"./input.BtdTvaem.js";import{S as u,a as h,b as j,c as v,d as S}from"./select.BKrJ3BO-.js";import{T as f}from"./textarea.tTUkXvbq.js";import{S as N,b as T}from"./transcriptions.BDQUoU-M.js";import{s as y}from"./safe-redirect.DUNX2EJd.js";import{i as w}from"./is-defined.BPY7jSh6.js";import{u as E}from"./use-toast.BikYzejn.js";import{S as R,a as I}from"./create.DVInPEpD.js";import{a as V,h as A,b as D}from"./toast-handler.Ct0WAJ7j.js";import{S as O}from"./save.CAQ01TeF.js";import".prisma/client/index-browser";import"./index.1JkRN11X.js";import"./index.DrxKNVES.js";import"./index.BLEmuFXE.js";import"./index.2EOGNVNh.js";import"./index.rqUiOy30.js";import"./index.B2LyIUNT.js";import"./index.Li38iYKq.js";import"./classnames.B8F8Dq1p.js";import"./index.BJknnQuW.js";import"./index.qJiwp9Ip.js";import"./index.CoUN5iVw.js";import"./index.Ca4aSXhd.js";import"./index.yusZEH1f.js";import"./Combination.CoL-rreF.js";import"./index.BRpELbpY.js";import"./index.CGPvhYpy.js";import"./index.CdA-AeYO.js";import"./index.wLl3Idx7.js";import"./chevrons-up-down.BMPs55cN.js";import"./createLucideIcon.D2R2PR3o.js";import"./chevron-down.DmgAbkcx.js";import"./dev-console-log.CInb5xbI.js";import"./env.Bik-fSFe.js";import"./index.CdM0oSJi.js";import"./index.CwYy1fy-.js";import"./message-display.CI2NEmxy.js";async function F(s){try{const{data:m}=await V.post("/api/stack",s);return m}catch(m){throw A({error:m,defaultErrorMessage:"No se pudo crear el stack."})}}function Ne({disableForm:s=!1}){const{toast:m}=E(),o=b({resolver:g(I),defaultValues:R}),d=async r=>{try{const a=await F(r);o.reset(),m({title:"Stack creado",description:"El stack ha sido creado exitosamente.",className:"bg-green-500 text-black"}),w(a?.id)&&y(`/vault/views/stack/${a.id}`)}catch(a){D({error:a,title:"No se pudo crear el stack",defaultErrorMessage:"Ha ocurrido un error al intentar crear el stack.",tryAgain:()=>d(r)})}};return e.jsx(C,{...o,children:e.jsxs("form",{className:"space-y-8",onSubmit:o.handleSubmit(d),children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(t,{control:o.control,name:"key",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Key"}),e.jsx(n,{children:e.jsx(p,{disabled:s,placeholder:"Key",...r})}),e.jsx(c,{})]})}),e.jsx(t,{control:o.control,name:"name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Nombre"}),e.jsx(n,{children:e.jsx(p,{disabled:s,placeholder:"Nombre",...r,value:r.value===null?void 0:r.value})}),e.jsx(c,{})]})}),e.jsx(t,{control:o.control,name:"description",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Descripción"}),e.jsx(n,{children:e.jsx(f,{disabled:s,placeholder:"Descripción",...r,value:r.value===null?void 0:r.value})}),e.jsx(c,{})]})}),e.jsx(t,{control:o.control,name:"category",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Categoria"}),e.jsxs(u,{defaultValue:r.value===null?void 0:r.value,disabled:s,onValueChange:r.onChange,...r,value:r.value===null?void 0:r.value,children:[e.jsx(n,{children:e.jsx(h,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Descripción"})})}),e.jsx(v,{children:Object.values(x.StackCategory).map(a=>e.jsx(S,{value:a,children:N[a]},a))})]}),e.jsx(c,{})]})}),e.jsx(t,{control:o.control,name:"type",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Tipo"}),e.jsxs(u,{defaultValue:r.value===null?void 0:r.value,disabled:s,onValueChange:r.onChange,...r,value:r.value===null?void 0:r.value,children:[e.jsx(n,{children:e.jsx(h,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Tipo"})})}),e.jsx(v,{children:Object.values(x.StackType).map(a=>e.jsx(S,{value:a,children:T[a]},a))})]}),e.jsx(c,{})]})}),e.jsx(t,{control:o.control,name:"iconUrl",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"URL de icono"}),e.jsx(n,{children:e.jsx(p,{disabled:s,placeholder:"iconURL",...r,value:r.value===null?void 0:r.value})}),e.jsx(c,{})]})})]}),e.jsxs(k,{className:"flex size-max items-center gap-2 rounded-lg bg-lime-600 p-2 text-white hover:bg-lime-700 dark:bg-lime-600 dark:hover:bg-lime-700",disabled:s,type:"submit",children:[e.jsx(O,{className:"size-7"}),e.jsx("span",{className:"text-lg",children:"Crear"})]})]})})}export{Ne as CreateStackForm};
